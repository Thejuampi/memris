# Plan to Fix Checkstyle Violations

## Summary
Address 162 checkstyle violations in memris-core by fixing high-signal code issues and removing noise rules. High signal: correctness and maintainability (UnusedImports, WhitespaceAround, EqualsAvoidNull, etc.). Noise: overly strict formatting (CustomImportOrder, AvoidStaticImport, LineLength increase to 160).

## High Signal Fixes
Apply fixes in code to resolve violations:

- **UnusedImports** (remove unused imports in ~5 files):
  - `memris-core/src/main/java/io/memris/index/RangeIndex.java`: Remove `io.memris.kernel.LongEnumerator`, `java.util.Map`.
  - `memris-core/src/main/java/io/memris/query/QueryMethodLexer.java`: Remove `java.util.Locale`.
  - `memris-core/src/main/java/io/memris/repository/EntitySaverGenerator.java`: Remove `net.bytebuddy.dynamic.DynamicType`.
  - `memris-core/src/main/java/io/memris/repository/MemrisRepositoryFactory.java`: Remove `io.memris.runtime.EntitySaver`.
  - `memris-core/src/main/java/io/memris/storage/heap/TableGenerator.java`: Remove `net.bytebuddy.dynamic.DynamicType`, `java.lang.reflect.Field`.

- **WhitespaceAround** (add spaces around braces/operators in ~5 files):
  - `memris-core/src/main/java/io/memris/query/QueryMethodToken.java:9`: Add space after `{`, before `}`.
  - `memris-core/src/main/java/io/memris/repository/MemrisRepositoryFactory.java:338`: Add space after `,`.
  - `memris-core/src/main/java/io/memris/storage/heap/LongIdIndex.java:66`: Add space after `{`, before `}`.
  - `memris-core/src/main/java/io/memris/storage/heap/StringIdIndex.java:70`: Add space after `{`, before `}`.
  - `memris-core/src/main/java/io/memris/storage/heap/TableImplementationStrategy.java:44`: Add space after `{`, before `}`.

- **EqualsAvoidNull** (swap sides in 2 locations):
  - `memris-core/src/main/java/io/memris/query/QueryPlanner.java:493,502`: Change `"string".equals(var)` to `var.equals("string")`.

- **MultipleVariableDeclarations** (split in 1 location):
  - `memris-core/src/main/java/io/memris/runtime/RepositoryRuntime.java:1253`: Split multiple declarations.

- **MissingSwitchDefault** (add default in 3 switches):
  - `memris-core/src/main/java/io/memris/query/QueryPlanner.java:309,349`: Add `default: throw new IllegalArgumentException("Unsupported type");`.
  - `memris-core/src/main/java/io/memris/runtime/RepositoryRuntime.java:633`: Add default clause.

- **AvoidStarImport** (replace with specific imports in ~3 files):
  - `memris-core/src/main/java/io/memris/repository/MemrisRepositoryFactory.java:44-45`: Replace `.*` imports with specific ones.
  - `memris-core/src/main/java/io/memris/repository/RepositoryEmitter.java:12,26`: Replace `.*` imports.

## Noise Rule Removals
Modify `checkstyle.xml` to remove strict rules causing ~120 violations:

- Remove `<module name="CustomImportOrder">` block (lines 46-54).
- Remove `<module name="AvoidStaticImport"/>` (line 43).
- Change LineLength max from 140 to 160 (line 33).

## Critical Files
- `checkstyle.xml` (remove/modify rules)
- Files listed above for code fixes (~15 files total)

## Verification
1. Apply code fixes in batches (UnusedImports first).
2. Run `mvn checkstyle:check` after each batch to verify reduction.
3. Modify `checkstyle.xml`.
4. Final `mvn checkstyle:check`: 0 violations.
5. Compile: `mvn -q compile`, Tests: `mvn -q -pl memris-core test`.</content>
<parameter name="filePath">G:\dev\repos\memris\.opencode\plans\1770001972905-clever-otter.md